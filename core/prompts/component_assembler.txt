You are a Scenic DSL expert. A {component_type} component needs to be replaced or added in the scenario.

we provide a replacement for the component, but the replacement component may reference variables, parameters, or objects that don't exist in the original code. Your task is to intelligently handle these dependencies and merge the replacement with the original code and return the complete assembled code.Leave the rest of the original code unchanged.

Original Code:
{original_code}

Component Type: {component_type}

Original Component Code (may be empty if component is missing):
{original_component_code}

Replacement Component Code:
{replacement_code}

Source Scenario Context (where replacement came from - use this to find missing definitions):
{source_context}

DEPENDENCY HANDLING:
- Trajectory parameters (e.g., egoTrajectory, advTrajectory)
- Lane/maneuver definitions (e.g., egoInitLane, egoManeuver)
- Distance ranges and thresholds
- Behavioral parameters

DEDUPLICATION RULES (CRITICAL):
1. Detect and merge duplicate parameter definitions
   - If multiple components define the same parameter (e.g., param ADV_SPEED), keep only ONE definition
   - Prefer the most specific or restrictive definition
   
2. Preserve parameter dependencies and order
   - Keep parameters in correct order (e.g., ADV1_DIST before ADV2_DIST if ADV2_DIST references ADV1_DIST)
   
3. Merge behavior definitions
   - Keep all behavior definitions with different names
   - If behaviors have the same name but different implementations, rename them (e.g., AdversaryBehavior -> AdversaryBehavior1, AdversaryBehavior2)
   
4. Ensure object creation uses correct behaviors
   - Make sure each object references its corresponding behavior

Example deduplication:
INPUT:
  param ADV_SPEED = Range(2, 4)
  behavior Adversary1Behavior():
      do FollowLaneBehavior(target_speed=globalParameters.ADV_SPEED)
  adversary_1 = new Car ...
  
  param ADV_SPEED = Range(2, 4)
  param ADV2_DIST = Range(10, 15)
  behavior Adversary2Behavior():
      do FollowLaneBehavior(target_speed=globalParameters.ADV_SPEED)
  adversary_2 = new Car ...

OUTPUT:
  param ADV_SPEED = Range(2, 4)
  param ADV2_DIST = Range(10, 15)
  
  behavior Adversary1Behavior():
      do FollowLaneBehavior(target_speed=globalParameters.ADV_SPEED)
  
  behavior Adversary2Behavior():
      do FollowLaneBehavior(target_speed=globalParameters.ADV_SPEED)
  
  adversary_1 = new Car ...
  adversary_2 = new Car ...

Output only the complete assembled Scenic code (no explanations, no markdown formatting). 
